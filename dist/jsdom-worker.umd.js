!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("node-fetch")):"function"==typeof define&&define.amd?define(["node-fetch"],t):t(e.fetch)}(this,function(fetch){var fetch__default="default"in fetch?fetch.default:fetch;function mitt(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map(function(e){e(n)}),(e["*"]||[]).slice().map(function(e){e(t,n)})}}}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var uuidV4=createCommonjsModule(function(e,t){t=e.exports=function(){for(var e,n="",o=0;o<32;o++)e=16*t.random()|0,o>4&&o<21&&!(o%4)&&(n+="-"),n+=(12===o?4:16===o?3&e|8:e).toString(16);return n};var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;t.isUUID=function(e){return n.test(e)},t.random=function(){return Math.random()}});if(global.URL||(global.URL={}),!global.URL.$$objects){global.URL.$$objects=new Map,global.URL.createObjectURL=function(e){var t=uuidV4();return global.URL.$$objects[t]=e,"blob:http://localhost/"+t};try{global.fetch=function(e,t){return new Promise(function(t,n){var o=new FileReader;o.onload=function(){var e=global.Response||fetch__default.Response;t(new e(o.result,{status:200,statusText:"OK"}))},o.onerror=function(){n(o.error)};var s=e.match(/[^\/]+$/)[0];o.readAsText(global.URL.$$objects[s])})}}catch(e){}}function Event(e){this.type=e}global.document||(global.document={}),Event.prototype.initEvent=Object,global.document.createEvent||(global.document.createEvent=function(e){return new(global[e]||Event)(e)}),global.Worker=function Worker(url){var this$1=this,messageQueue=[],inside=mitt(),outside=mitt(),scope={onmessage:null,dispatchEvent:inside.emit,addEventListener:inside.on,removeEventListener:inside.off,postMessage:function(e){outside.emit("message",{data:e})},fetch:global.fetch,importScripts:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t]}},getScopeVar;inside.on("message",function(e){var t=getScopeVar("onmessage");t&&t.call(scope,e)}),this.addEventListener=outside.on,this.removeEventListener=outside.off,this.dispatchEvent=outside.emit,outside.on("message",function(e){this$1.onmessage&&this$1.onmessage(e)}),this.postMessage=function(e){null!=messageQueue?messageQueue.push(e):inside.emit("message",{data:e})},this.terminate=function(){throw Error("Not Supported")},global.fetch(url).then(function(e){return e.text()}).then(function(code){var vars="var self=this,global=self";for(var k in scope)vars+=","+k+"=self."+k;getScopeVar=eval("(function() {"+vars+";\n"+code+"\nreturn function(__){return eval(__)}})").call(scope);var q=messageQueue;messageQueue=null,q.forEach(this$1.postMessage)}).catch(function(e){})}});
//# sourceMappingURL=jsdom-worker.umd.js.map
